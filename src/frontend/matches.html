<!DOCTYPE html>
<html lang="en">
{% include "head.html" %}
<body>
{% include "header.html" %}
<main>
    <div class="container">
        <h1>Matches</h1>
        <form class="input-container" action="/matches/" method="get">
            <input class="input-filter" name="filter_by_player_name" placeholder="Filter by name" type="text"
            value="{{ match_filters.filter_by_player_name }}"/>
            <!-- Чекбоксы для фильтров -->
            <div class="checkbox-filters">
                <label>
                    <input type="checkbox" name="finished" value="true"
                           {% if match_filters.finished %}checked{% endif %}>
                    finished
                </label>
                <label>
                    <input type="checkbox" name="ongoing" value="true"
                           {% if match_filters.ongoing %}checked{% endif %}>
                    ongoing
                </label>
            </div>

            <button class="btn-filter" type="submit">Apply</button>
            <a href="/matches/">
                <button class="btn-reset" type="button">Reset</button>
            </a>
        </form>

        <table class="table-matches">
            <tr>
                <th>Player One</th>
                <th>Player Two</th>
                <th>Winner</th>
            </tr>
            {% for match in matches %}
            <tr>
                <td>{{ match.player1.name }}</td>
                <td>{{ match.player2.name }}</td>
                <td>
                    {% if match.winner %}
                    <span class="winner-name-td">{{ match.winner.name }}</span>
                    {% else %}
                    <span class="ongoing-td">ongoing</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>

        <div class="pagination">
            {% if page_number > 1 %}
            <a class="prev"
               href="/matches/?page_number={{ page_number - 1 }}&filter_by_player_name={{ match_filters.filter_by_player_name }}&finished={{ match_filters.finished }}&ongoing={{ match_filters.ongoing }}"> &lt; </a>
            {% else %}
            <span class="prev disabled"> &lt; </span>
            {% endif %}

            {% for page in range(1, total_pages + 1) %}
                {% if page == page_number %}
                <span class="num-page current">{{ page }}</span>
                {% else %}
                <a class="num-page"
                   href="/matches/?page_number={{ page }}&filter_by_player_name={{ match_filters.filter_by_player_name }}&finished={{ match_filters.finished }}&ongoing={{ match_filters.ongoing }}">{{ page }}</a>
                {% endif %}
            {% endfor %}

            {% if page_number < total_pages %}
            <a class="next"
               href="/matches/?page_number={{ page_number + 1 }}&filter_by_player_name={{ match_filters.filter_by_player_name }}&finished={{ match_filters.finished }}&ongoing={{ match_filters.ongoing }}"> &gt; </a>
            {% else %}
            <span class="next disabled"> &gt; </span>
            {% endif %}
        </div>
    </div>
</main>
{% include "footer.html" %}
</body>
</html>
